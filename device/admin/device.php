
<?php


  include 'header.php';



?>


<?php

// $connect = mysqli_connect("localhost", "root", "", "loginsystem");
// $sortquery = "SELECT * FROM employee" ;
// $search_result = mysqli_query($connect,$sortquery);

?>







<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha1/dist/css/bootstrap.min.css">


<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha1/dist/css/bootstrap.min.css">


<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.5/jquery.validate.min.js" integrity="sha512-rstIgDs0xPgmG6RX1Aba4KV5cWJbAMcvRCVmglpam9SoHZiUCyQVDdH2LPlxoHtrv17XWblE/V/PP+Tr04hbtA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.5/jquery.validate.min.js" integrity="sha512-rstIgDs0xPgmG6RX1Aba4KV5cWJbAMcvRCVmglpam9SoHZiUCyQVDdH2LPlxoHtrv17XWblE/V/PP+Tr04hbtA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha1/dist/css/bootstrap.min.css">

<link  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Document</title>


<link rel="stylesheet" href="style.css">
</head>
<body > 


<!--  -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<link rel="stylesheet" href="style.css">

<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha1/dist/css/bootstrap.min.css">

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.5/jquery.validate.min.js" integrity="sha512-rstIgDs0xPgmG6RX1Aba4KV5cWJbAMcvRCVmglpam9SoHZiUCyQVDdH2LPlxoHtrv17XWblE/V/PP+Tr04hbtA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Document</title>
<link rel="stylesheet" href="style.css">

</head>
<body>
<?php
// require('database.php');
// // When form submitted, data->databa
// if (isset($_POST['submit'])) {
//     // removes backslashes
//     $fname = ($_POST['fname']);
//     $lname = ($_POST['lname']);
//     $doj = ($_POST['doj']);
//     $dob = ($_POST['dob']);
//     $email    = ($_POST['email']);
//     $address = ($_POST['address']);
//     $phone = ($_POST['phone']);
//     $picture = ($_POST['picture']);
//     $status = ($_POST['status']);



//     $query    = "INSERT into `employee` (fname, lname, doj, dob,email,address,phone,image,status)
//                  VALUES ('$fname', '$lname', '$doj', '$dob','$email','$address','$phone','$picture','$status')";
         
//     $result   = mysqli_query($conn, $query);
//     if ($result){
//       echo "<script>window.location.href='employeetable.php'</script>";

//     }
//   //   if ($result) {
//   //       echo "<div class='form'>
//   //             <h3>You are registered successfully.</h3><br/>
      
//   //             <p class='link'>Click here to <a href='employeetable.php'>Login</a></p>
//   //             </div>";}
//   //   else {
//   //       echo "<div class='form'>
//   //                   <h3>Required fields are missing.</h3><br/>
//   //             <p class='link'>Click here to <a href='registration.php'>registration</a> again.</p>
//   //                        </div>";
//   //  }

//  } 
//  else{
?>


<div class="modal fade" id="addmodal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel "
aria-hidden="true" style="width: 100%;">
<div class="modal-dialog " role="document" style="width: 2000px;" >
<div class="modal-content col-md-12 col-lg-12 " style="width: 100%; border:none;" id="form1">
<div style="margin-top:10%;" style="width: 100%;">
<h1 class="d-flex justify-content-center text-light">Registration</h1>
</div>

<form  method="post" name="myform" id='myform' style="width: 100%; border:none;"  action="device_upload.php">
<div class="container mt-3 ">
<div class="row d-flex justify-content-center align-self-center md-7" style="margin: left 4px;;">
<div class="col-md-12 col-lg-12 ">
<div class="card  " id="form1" style="border:none;">

<div class="forms-inputs mb-4"> 
          <label for="status">Device Type</label>
    <select name="type" id="type" required class=" form-select ">
        <option value="please select appropriate Device type" selected disabled>please select appropriate role</option>
        <option value="Laptop">Laptop</option>
        <option value="Desktop">Desktop</option>
        <option value="Phone">Phone</option>
    </select>
            
            </div>
    
        <div class="forms-inputs mb-4"> 
          <label class="form-lable" for="fname">Device name</label> 
          <input name="name" id="name" type="text" class="form-control" placeholder="enter cource name" >
            
        </div>
        

        <div class="forms-inputs mb-4"> 
          <label for="status">status</label>
    <select name="status" id="status" required class=" form-select ">

        <option value="Available">Available</option>
        <option value="Requested">Requested</option>
        <option value="Unavailable">Unavailable</option>
    </select>
            
            </div>
        <div class="mb-3"> <button name="registersubmit" type="submit" id="registerinsert"  class="btn btn-dark w-100" >Register</button> </div>
    
    
</div>
</div>
</div>
</div>
</form>










<script>
jQuery('#myform').validate({

rules:{
  
  
type:{required:true},
name:{required:true},
status:{required:true},




},




});

</script>











<?php
// }
?>

</div>
</div>
</div>

<!-- --------------------------------------- -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<link rel="stylesheet" href="style.css">

<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha1/dist/css/bootstrap.min.css">

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.5/jquery.validate.min.js" integrity="sha512-rstIgDs0xPgmG6RX1Aba4KV5cWJbAMcvRCVmglpam9SoHZiUCyQVDdH2LPlxoHtrv17XWblE/V/PP+Tr04hbtA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Document</title>
<link rel="stylesheet" href="style.css">

</head>
<body>

<?php
// require('database.php');
// $conn = mysqli_connect("localhost","root","","loginsystem");
// // When form submitted, data->databa
// if (isset($_POST['submit1'])) {
//     // removes backslashes
//     $id = ($_POST['id']);
//     $fname = ($_POST['fname']);
//     $lname = ($_POST['lname']);
//     $doj = ($_POST['doj']);
//     $dob = ($_POST['dob']);
//     $email    = ($_POST['email']);
//     $address = ($_POST['address']);
//     $phone = ($_POST['phone']);
//     $picture = ($_POST['picture']);
//     $status = ($_POST['status']);

//     $conn = mysqli_connect("localhost","root","","loginsystem");

//     $sqli = "update employee SET fname='$fname',lname='$lname',doj='$doj',dob='$dob',email='$email',address='$address',phone='$phone',image='$picture',status='$status' where id='$id'";
         
//     $result   = mysqli_query($conn, $sqli);
//     if ($result){
//       echo "<script>window.location.href='employeetable.php'</script>";

//     }
//   //   if ($result) {
//   //       echo "<div class='form'>
//   //             <h3>You are registered successfully.</h3><br/>
      
//   //             <p class='link'>Click here to <a href='employeetable.php'>Login</a></p>
//   //             </div>";}
//   //   else {
//   //       echo "<div class='form'>
//   //                   <h3>Required fields are missing.</h3><br/>
//   //             <p class='link'>Click here to <a href='registration.php'>registration</a> again.</p>
//   //                        </div>";
//   //  }

//  } 
//  else{
?>


<div class="modal fade" id="editform" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
aria-hidden="true" style="width: 100%;">
<div class="modal-dialog " role="document" style="width: 2000px;" >
<div class="modal-content col-md-12 col-lg-12 " style="width: 100%; border:none;" id="form1">
<div style="margin-top:10%;" style="width: 100%;">
<h1 class="d-flex justify-content-center text-light">edit </h1>
</div>
<form  method="post" name="myform1" id='myform1' style="width: 100%; border:none;"  action="device_update.php">
<div class="container mt-3 ">
<div class="row d-flex justify-content-center align-self-center md-7" style="margin: left 4px;;">
<div class="col-md-12 col-lg-12 ">
<div class="card  " id="form1" style="border:none;">



        <input type="hidden" name="id" id="id1">

    
    
        <div class="forms-inputs mb-4"> 
          <label for="status">Device Type</label>
    <select name="type11" id="type11" required class=" form-select ">
        <option value="please select appropriate Device type" selected disabled>please select appropriate role</option>
        <option value="Laptop">Laptop</option>
        <option value="Desktop">Desktop</option>
        <option value="Phone">Phone</option>
    </select>
            
            </div>
    
        <div class="forms-inputs mb-4"> 
          <label class="form-lable" for="fname">Device name</label> 
          <input name="name11" id="name11" type="text" class="form-control" placeholder="enter cource name" >
            
        </div>
        

        <div class="forms-inputs mb-4"> 
          <label for="status">status</label>
    <select name="status11" id="status11" required class=" form-select ">

        <option value="Available">Available</option>
        <option value="Requested">Requested</option>
        <option value="Unavailable">Unavailable</option>
    </select>
            
            </div>
        <div class="mb-3"> <button name="submit1" type="submit" id="insert1"  class="btn btn-dark w-100" >Update</button> </div>
    
    
</div>
</div>
</div>
</div>
</form>










<script>
jQuery('#myform1').validate({

rules:{

fname11:{required:true},






},


// submitHandler: function(form){
// $.ajax({
// url: 'update_user_detail.php ',
// type:'POST',
// data: new FormData(form),

// mimeType:"multipart/form-data",
// contentType:false,
// cache:false,
// processData:false,
// success: function(response){
// $('#editform').modal('hide');
// // window.location.href='employeetable.php'
// // data: new FormData(this),
// //data: $('#myform1').serialize(),
// }

// });
// }




});

</script>











<?php
//  }
?>

</div>
</div>
</div>
</body>
</html>

</body>
</html>
<!-- --------------------------------------- -->


<!--  -->

<div class="container-fluid mt-5 rounded ms-5 me-2 " id="form"  ><br>
<div class="d-flex justify-content-end">

<div class="text-center">
<a href="" class="btn btn-default btn-primary btn-rounded mb-4" data-toggle="modal" data-target="#addmodal">add new course</a>
</div>




    <!-- <input class="form-control  me-3" type="search" placeholder="Search" aria-label="Search"> -->
    <!-- <input class="btn btn-success my-2 my-sm-0 " type="submit">Search</input> -->

<br>





</div>







<div class="table-responsive">
<table class="table mt-3 rounded" id="editableTable">
<thead class="bg-dark">
  <tr class="text-white">
    <th scope="col">Id</th>
    <th scope="col">Device Type</th>
    <th scope="col">Device name</th>

    <th scope="col">status</th>
    <th></th>
    <th></th>
    <th></th>
    
  </tr>
</thead>

<?php
  include 'grab.php';
  $data = $dragobj -> dragdata('device');
  
   
    while($row = mysqli_fetch_array($data)):?>
    <tr id="trhover">
        
        <td ><div class="id"><?php echo $row['id'];?></div></td>
        <td ><div class="type"><?php echo $row['type'];?></div></td>
        <td ><div class="fname"><?php echo $row['name'];?></div></td>
       
        <td ><div class="status"><?php echo $row['status'];?></div> </td>
        <td>
          
        

     
      
 
        <td><a id="<?php echo $row["id"]; ?>" class='edit' name='edit' ><span> <button  class="btn-success rounded"> EDIT </button></span></a></td>
                                
                                <td> <button  id='<?= $row['id'] ?>' class="delete btn-danger rounded"> DELETE </button></td>
                                            

    </tr>
    <?php endwhile;?>

</table>

<script>

</script>
<script type="text/javascript">
$(document).ready(function(){
  // /////////////////////////////////
  $(document).on('click', '.edit', function(){  
var resultid = $(this).attr("id");  
$.ajax({  
    url:"device_fetch.php",  
    method:"POST",  
    data:{resultid:resultid},  
    dataType:"json",  
    success:function(data){
         $('#id1').val(data.id); 
         $('#type11').val(data.type);  
         $('#name11').val(data.name);
           
         
         $('#status11').val(data.status);
         
         $('#insert').val("Update");  
         $('#editform').modal('show');  
    }  
});  
});
});

$(document).on('click', '.delete', function(){
    var el = this;

// Delete id
    var deleteid = $(this).attr('id');
    console.log(deleteid);
    var confirmalert = confirm("Are you sure?");
    if (confirmalert == true) {
// AJAX Request
      $.ajax({
        url: 'device_remove.php',
        type: 'POST',
        data: { id:deleteid },
        success: function(response){

          if (response == true){
            alert("you cant delete this record still exist in other page");
          }
          else{
            window.location.href="device.php";
          }

          

        }
      });
    }

});

</script>
</div>






</div>

</div>



</body>
</html>
